name: AI Code Review

# ç•¶ PR è¢«å‰µå»ºæˆ–æ›´æ–°æ™‚è‡ªå‹•è§¸ç™¼
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  ai-review:
    runs-on: ubuntu-latest

    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: AI Code Review
        id: review
        uses: BBsBrezz/Gitlab-MCP@v1
        with:
          gemini-api-key: ${{ secrets.GEMINI_API_KEY }}
          github-token: ${{ secrets.GITHUB_TOKEN }}

      - name: Review Result
        if: always()
        run: |
          echo "ðŸ¤– AI Code Review completed"
          echo "Review posted: ${{ steps.review.outputs.review-posted }}"
          if [ "${{ steps.review.outputs.comment-url }}" != "" ]; then
            echo "Comment URL: ${{ steps.review.outputs.comment-url }}"
          fi
